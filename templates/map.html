{% extends 'base.html' %}
{% block content %}
<div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
    <div class="bg-white overflow-hidden shadow rounded-lg">
        <div class="px-4 py-5 sm:px-6 border-b border-gray-200 flex justify-between items-center">
            <h2 class="text-xl font-bold text-gray-900">
                <i class="fas fa-map-marked-alt text-primary mr-2"></i> Community Waste Map
            </h2>
            <div class="flex items-center gap-3">
                <span id="cleanup-text" class="text-sm text-gray-500 font-medium flex items-center gap-1">
                    ðŸ§¹ Clean-up mode is currently off
                </span>
                <button id="cleanup-toggle-btn" onclick="toggleCleanupMode()"
                    class="bg-gray-200 text-gray-700 px-3 py-1 rounded-full text-xs font-bold transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 w-12">
                    OFF
                </button>
            </div>
        </div>
        <div class="p-0">
            <div id="map" class="h-[600px] w-full z-0"></div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/map.js') }}"></script>
<script>
    function toggleCleanupMode() {
        const mapDiv = document.getElementById('map');
        const btn = document.getElementById('cleanup-toggle-btn');
        const txt = document.getElementById('cleanup-text');
        const isEnabled = mapDiv.classList.toggle('cleanup-mode');

        if (isEnabled) {
            btn.textContent = "ON";
            btn.className = "bg-primary text-white px-3 py-1 rounded-full text-xs font-bold transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 w-12";
            txt.innerHTML = "ðŸ§¹ Clean-up mode enabled";
            txt.classList.add("text-primary");
        } else {
            btn.textContent = "OFF";
            btn.className = "bg-gray-200 text-gray-700 px-3 py-1 rounded-full text-xs font-bold transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 w-12";
            txt.innerHTML = "ðŸ§¹ Clean-up mode is currently off";
            txt.classList.remove("text-primary");
        }
    }
</script>
{% endblock %}